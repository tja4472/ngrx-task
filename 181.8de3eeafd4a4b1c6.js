"use strict";(self.webpackChunkng_task=self.webpackChunkng_task||[]).push([[181],{9181:(tt,m,i)=>{i.r(m),i.d(m,{SignInPageComponentStoreComponentModule:()=>q});var l=i(6895),v=i(9116),E=i(5160),C=i(9751),O=i(727),A=i(3101),I=i(4707),y=i(576);function P(e){return!!e&&(e instanceof C.y||(0,y.m)(e.lift)&&(0,y.m)(e.subscribe))}var b=i(9646),$=i(233),x=i(515),F=i(2843),R=i(2581),U=i(9841),H=i(7579),D=i(4986),K=i(5363),d=i(8505),L=i(1365),h=i(4004),j=i(262),g=i(2722),N=i(5698),Y=i(1884),B=i(4782),s=i(4650);function M(){return e=>new C.y(r=>{let t,n;const o=new O.w0;return o.add(e.subscribe({complete:()=>{t&&r.next(n),r.complete()},error:c=>{r.error(c)},next:c=>{n=c,t||(t=A.E.schedule(()=>{r.next(n),t=void 0}),o.add(t))}})),o})}function f(e){return"function"==typeof e.ngrxOnStoreInit}function S(e){return"function"==typeof e.ngrxOnStateInit}const J=new s.OlP("@ngrx/component-store Initial State");let Z=(()=>{class e{constructor(t){this.destroySubject$=new I.t(1),this.destroy$=this.destroySubject$.asObservable(),this.stateSubject$=new I.t(1),this.isInitialized=!1,this.state$=this.select(n=>n),this.\u0275hasProvider=!1,t&&this.initState(t),this.checkProviderForHooks()}ngOnDestroy(){this.stateSubject$.complete(),this.destroySubject$.next()}updater(t){return n=>{let c,o=!0;const a=(P(n)?n:(0,b.of)(n)).pipe((0,K.Q)($.N),(0,d.b)(()=>this.assertStateIsInitialized()),(0,L.M)(this.stateSubject$),(0,h.U)(([u,_])=>t(_,u)),(0,d.b)(u=>this.stateSubject$.next(u)),(0,j.K)(u=>o?(c=u,x.E):(0,F._)(()=>u)),(0,g.R)(this.destroy$)).subscribe();if(c)throw c;return o=!1,a}}initState(t){(0,R.x)([t],$.N).subscribe(n=>{this.isInitialized=!0,this.stateSubject$.next(n)})}setState(t){"function"!=typeof t?this.initState(t):this.updater(t)()}patchState(t){const n="function"==typeof t?t(this.get()):t;this.updater((o,c)=>({...o,...c}))(n)}get(t){let n;return this.assertStateIsInitialized(),this.stateSubject$.pipe((0,N.q)(1)).subscribe(o=>{n=t?t(o):o}),n}select(...t){const{observables:n,projector:o,config:c}=function G(e){const r=Array.from(e);let n,t={debounce:!1};const o=r.pop();return"function"!=typeof o?(t={...t,...o},n=r.pop()):n=o,{observables:r,projector:n,config:t}}(t);let p;return p=0===n.length?this.stateSubject$.pipe(c.debounce?M():a=>a,(0,h.U)(a=>o(a))):(0,U.a)(n).pipe(c.debounce?M():a=>a,(0,h.U)(a=>o(...a))),p.pipe((0,Y.x)(),(0,B.d)({refCount:!0,bufferSize:1}),(0,g.R)(this.destroy$))}effect(t){const n=new H.x;return t(n).pipe((0,g.R)(this.destroy$)).subscribe(),o=>(P(o)?o:(0,b.of)(o)).pipe((0,g.R)(this.destroy$)).subscribe(p=>{n.next(p)})}checkProviderForHooks(){D.z.schedule(()=>{if((0,s.X6Q)()&&(f(this)||S(this))&&!this.\u0275hasProvider){const t=[f(this)?"OnStoreInit":"",S(this)?"OnStateInit":""].filter(n=>n);console.warn(`@ngrx/component-store: ${this.constructor.name} has the ${t.join(" and ")} lifecycle hook(s) implemented without being provided using the provideComponentStore(${this.constructor.name}) function. To resolve this, provide the component store via provideComponentStore(${this.constructor.name})`)}})}assertStateIsInitialized(){if(!this.isInitialized)throw new Error(`${this.constructor.name} has not been initialized yet. Please make sure it is initialized before updating/getting.`)}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(J,8))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();var Q=i(4351),X=i(6518);let T=(()=>{class e extends Z{constructor(t){super({error:null,pending:!1}),this.authService=t,this.updater1=this.updater(n=>({...n,error:"error text"})),this.setErrorText=this.updater((n,o)=>({...n,error:o})),this.setPending=this.updater((n,o)=>({...n,pending:o})),this.vm$=this.select(n=>n),this.effect1=this.effect(n=>n.pipe((0,d.b)({next:o=>{console.log("aaa>",o),this.updater1(),this.setPending(!0),this.authService.signIn()}}))),this.effect2=this.effect(n=>n.pipe((0,d.b)({next:o=>{this.setPending(!0)}}),(0,Q.b)(o=>this.authService.login(o.username,o.password).pipe((0,h.U)(c=>{null!==c.user&&console.log("Signin success>",{uid:c.user.uid})}),(0,j.K)(c=>(console.error("Error>>>>",c),this.setErrorText(c.message),this.setPending(!1),x.E))))))}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(X.e))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();var W=i(9653),z=i(7254);function w(e,r){if(1&e){const t=s.EpF();s.TgZ(0,"div")(1,"app-credentials-form",1),s.NdJ("SignUpClicked",function(){s.CHM(t);const o=s.oxw();return s.KtG(o.onSignUp())})("submitted",function(o){s.CHM(t);const c=s.oxw();return s.KtG(c.onSubmitted(o))}),s.qZA()()}if(2&e){const t=r.ngIf;s.xp6(1),s.Q6J("errorMessage",t.error)}}const V=[{path:"",component:(()=>{class e{constructor(t,n){this.store=t,this.signInPageComponentStore=n,this.vm$=this.signInPageComponentStore.vm$}onSubmitted(t){console.log("onSubmitted>",t)}onSignUp(){this.store.dispatch(E.j.showSignUpPage())}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(W.yh),s.Y36(T))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-sign-in-page-component-store"]],features:[s._Bn([T])],decls:4,vars:3,consts:[[4,"ngIf"],["formMode","SignInForm",3,"errorMessage","SignUpClicked","submitted"]],template:function(t,n){1&t&&(s.TgZ(0,"h2"),s._uU(1,"Component-Store"),s.qZA(),s.YNc(2,w,2,1,"div",0),s.ALo(3,"async")),2&t&&(s.xp6(2),s.Q6J("ngIf",s.lcZ(3,1,n.vm$)))},dependencies:[l.O5,z.s,l.Ov],encapsulation:2,changeDetection:0}),e})()}];let k=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[v.Bz.forChild(V),v.Bz]}),e})(),q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[l.ez,z.s,k]}),e})()}}]);