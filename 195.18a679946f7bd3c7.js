"use strict";(self.webpackChunkng_task=self.webpackChunkng_task||[]).push([[195],{8195:(ct,y,a)=>{a.r(y),a.d(y,{COMPONENTS:()=>at,CONTAINERS:()=>st,CurrentTasksModule:()=>it});var d=a(6895),c=a(4006),G=a(898),g=a(1206),t=a(4650),k=a(6709),m=a(8545),T=a(9101),Z=a(3336),C=a(9116);const B=function(n,o){return[n,o]},Q=function(n){return{"line-through":n}};function Y(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"mat-checkbox",5),t.NdJ("click",function(){const i=t.CHM(e).$implicit,D=t.oxw();return t.KtG(D.onCheckboxClick(i))}),t.qZA(),t.TgZ(3,"a",6)(4,"div",7)(5,"div",8),t._uU(6),t.qZA(),t.TgZ(7,"div",9),t._uU(8),t.qZA()()(),t.TgZ(9,"div",10)(10,"mat-icon"),t._uU(11,"drag_handle"),t.qZA()()()()}if(2&n){const e=o.$implicit,r=t.oxw();t.xp6(2),t.Q6J("checked",e.isComplete),t.xp6(1),t.Q6J("routerLink",t.WLB(5,B,r.editPath(),e.id)),t.xp6(1),t.Q6J("ngClass",t.VKq(8,Q,e.isComplete)),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.description)}}let P=(()=>{class n{constructor(){this.reorderItems=new t.vpe,this.newCurrentTask=new t.vpe,this.toggleCompleteItem=new t.vpe}viewTrackBy(e,r){return r.id}drop(e){console.log("currentIndex",e.currentIndex),console.log("previousIndex",e.previousIndex);const r=[...this.currentTasks];(0,g.bA)(r,e.previousIndex,e.currentIndex);const s=r.map(i=>i.id);console.log("aaa",r),console.log("bbb",s),s.forEach((i,D)=>{console.log("X:",i,D)}),this.reorderItems.emit(s)}editPath(){return m.N+m.k.currentTasks.path+m.N+m.k.currentTasks.edit.path}onCheckboxClick(e){this.toggleCompleteItem.emit(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-current-task-list"]],inputs:{currentTasks:"currentTasks"},outputs:{reorderItems:"reorderItems",newCurrentTask:"newCurrentTask",toggleCompleteItem:"toggleCompleteItem"},features:[t._Bn([{provide:k.$u,useValue:{clickAction:"noop"}}])],decls:5,vars:2,consts:[["cdkDropList","",1,"list",3,"cdkDropListDropped"],["cdkDrag","","cdkDragLockAxis","y",4,"ngFor","ngForOf","ngForTrackBy"],["data-test","new-current-task-button","mat-fab","",1,"fab-bottom-right",3,"click"],["cdkDrag","","cdkDragLockAxis","y"],["data-test","list-item",1,"list-item"],["data-test","is-complete-checkbox",3,"checked","click"],[3,"routerLink"],[1,"middle",3,"ngClass"],["data-test","item-name",1,"name"],[1,"description"],["cdkDragHandle","",1,"right"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.NdJ("cdkDropListDropped",function(i){return r.drop(i)}),t.YNc(1,Y,12,10,"div",1),t.qZA(),t.TgZ(2,"button",2),t.NdJ("click",function(){return r.newCurrentTask.emit()}),t.TgZ(3,"mat-icon"),t._uU(4,"add"),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("ngForOf",r.currentTasks)("ngForTrackBy",r.viewTrackBy))},dependencies:[d.mk,d.sg,g.Wj,g.Zt,g.Bh,k.oG,T.lW,Z.Hw,C.yS],styles:["[_nghost-%COMP%]{background-color:green;display:flex;flex-grow:1;flex-direction:column}.cdk-drag-preview[_ngcontent-%COMP%]{border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drop-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1);background-color:#00f}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .3s cubic-bezier(0,0,.2,1)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.list[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0px;overflow-y:scroll;display:flex;flex-direction:column}.list-item[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;padding:10px;border-bottom:solid 1px #ccc;box-sizing:border-box;background:white}mat-checkbox[_ngcontent-%COMP%]{padding-right:10px}.right[_ngcontent-%COMP%]{background:coral;cursor:move;padding-left:10px}.name[_ngcontent-%COMP%]{color:#000;font-size:medium}.description[_ngcontent-%COMP%]{color:gray;font-size:small;white-space:pre-line}.middle[_ngcontent-%COMP%]{flex-grow:1;padding-right:10px}.line-through[_ngcontent-%COMP%]{-webkit-text-decoration-line:line-through;text-decoration-line:line-through}a[_ngcontent-%COMP%]{text-decoration:none;display:flex;flex-wrap:nowrap;flex-grow:1}.fab-bottom-right[_ngcontent-%COMP%]{position:fixed;right:60px;bottom:16px;z-index:100}"]}),n})();var f=a(1232),A=a(7579),N=a(2722);let O=(()=>{class n{constructor(e){this.formBuilder=e,this.unsubscribe=new A.x}get completedTimestampControl(){const e=this.form.get("completedTimestamp");if(null===e)throw new Error("completedTimestamp AbstractControl is null");return e}get isCompleteControl(){const e=this.form.get("isComplete");if(null===e)throw new Error("isComplete AbstractControl is null");return e}init(e){this.initialData={...e},this.form=this.formBuilder.group({name:[this.initialData.name,c.kI.required],description:[this.initialData.description],isComplete:[this.initialData.isComplete],completedTimestamp:[this.initialData.completedTimestamp]}),this.isCompleteControl.valueChanges.pipe((0,N.R)(this.unsubscribe)).subscribe(r=>{console.log("value changes>",r),this.completedTimestampControl.setValue((0,f.Ov)(r))})}checkout(){const e={...this.initialData,...this.form.value};return console.log("this.form.value >",this.form.value),this.form.reset(),e}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(c.QS))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var F=a(9349),v=a(9549),M=a(284),u=a(3546);function q(n,o){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Name is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}let I=(()=>{class n{constructor(e){this.presenter=e,this.cancel=new t.vpe,this.checkout=new t.vpe}get checkoutForm(){return this.presenter.form}ngOnInit(){this.presenter.init(this.todo)}cancelClick(){this.cancel.emit(this.todo)}onSubmit(){const e=this.presenter.checkout();this.checkout.emit(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-current-task-detail-new"]],inputs:{todo:"todo"},outputs:{cancel:"cancel",checkout:"checkout"},features:[t._Bn([],[O])],decls:25,vars:3,consts:[["novalidate","",3,"formGroup","ngSubmit"],[1,"shipping-card"],["data-test","submit-button","mat-raised-button","","color","primary","type","submit",3,"disabled"],["data-test","cancel-button","mat-raised-button","","color","accent","type","button",3,"click"],[1,"row"],[1,"col"],["data-test","is-complete-checkbox","formControlName","isComplete"],[1,"full-width"],["data-test","name-input","matInput","","id","name","placeholder","Name","formControlName","name"],[4,"ngIf"],["data-test","description-textarea","matInput","","id","description","placeholder","Description","formControlName","description","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5"],["autosize","cdkTextareaAutosize"]],template:function(e,r){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return r.onSubmit()}),t.TgZ(1,"mat-card",1)(2,"mat-card-actions")(3,"button",2),t._uU(4," Submit "),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return r.cancelClick()}),t._uU(6," Cancel "),t.qZA()(),t.TgZ(7,"mat-card-header")(8,"mat-card-title"),t._uU(9,"New Current Task"),t.qZA()(),t.TgZ(10,"mat-card-content")(11,"div",4)(12,"div",5)(13,"mat-checkbox",6),t._uU(14,"Is Complete"),t.qZA()()(),t.TgZ(15,"div",4)(16,"div",5)(17,"mat-form-field",7),t._UZ(18,"input",8),t.YNc(19,q,4,0,"mat-error",9),t.qZA()()(),t.TgZ(20,"div",4)(21,"div",5)(22,"mat-form-field",7),t._UZ(23,"textarea",10,11),t.qZA()()()()()()),2&e&&(t.Q6J("formGroup",r.checkoutForm),t.xp6(3),t.Q6J("disabled",!(r.checkoutForm.dirty&&r.checkoutForm.valid)),t.xp6(16),t.Q6J("ngIf",r.checkoutForm.controls.name.hasError("required")))},dependencies:[d.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,F.IC,v.TO,v.KE,M.Nt,u.a8,u.dk,u.dn,u.n5,u.hq,k.oG,T.lW],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.shipping-card[_ngcontent-%COMP%]{margin:20px auto}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.col[_ngcontent-%COMP%]{flex:1;margin-right:20px}"]}),n})(),E=(()=>{class n{constructor(e){this.formBuilder=e,this.unsubscribe=new A.x}get completedTimestampControl(){const e=this.form.get("completedTimestamp");if(null===e)throw new Error("completedTimestamp AbstractControl is null");return e}get isCompleteControl(){const e=this.form.get("isComplete");if(null===e)throw new Error("isComplete AbstractControl is null");return e}init(e){this.initialData={...e},this.form=this.formBuilder.group({name:[this.initialData.name,c.kI.required],description:[this.initialData.description],isComplete:[this.initialData.isComplete],completedTimestamp:[this.initialData.completedTimestamp]}),this.isCompleteControl.valueChanges.pipe((0,N.R)(this.unsubscribe)).subscribe(r=>{console.log("value changes>",r),this.completedTimestampControl.setValue((0,f.Ov)(r))})}checkout(){const e={...this.initialData,...this.form.value};return console.log("this.form.value >",this.form.value),this.form.reset(),e}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(c.QS))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();function j(n,o){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Name is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA()())}let J=(()=>{class n{constructor(e){this.presenter=e,this.cancel=new t.vpe,this.remove=new t.vpe,this.checkout=new t.vpe}get checkoutForm(){return this.presenter.form}ngOnInit(){this.presenter.init(this.todo)}cancelClick(){this.cancel.emit(this.todo)}removeClick(){this.remove.emit(this.todo)}onSubmit(){const e=this.presenter.checkout();this.checkout.emit(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(E))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-current-task-detail-edit"]],inputs:{todo:"todo"},outputs:{cancel:"cancel",remove:"remove",checkout:"checkout"},features:[t._Bn([],[E])],decls:27,vars:3,consts:[["novalidate","",3,"formGroup","ngSubmit"],[1,"shipping-card"],["data-test","submit-button","mat-raised-button","","color","primary","type","submit",3,"disabled"],["data-test","cancel-button","mat-raised-button","","color","accent","type","button",3,"click"],["data-test","remove-button","mat-raised-button","","color","accent","type","button",3,"click"],[1,"row"],[1,"col"],["formControlName","isComplete"],[1,"full-width"],["data-test","name-input","matInput","","id","name","placeholder","Name","formControlName","name"],[4,"ngIf"],["data-test","description-textarea","matInput","","id","description","placeholder","Description","formControlName","description","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5"],["autosize","cdkTextareaAutosize"]],template:function(e,r){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return r.onSubmit()}),t.TgZ(1,"mat-card",1)(2,"mat-card-actions")(3,"button",2),t._uU(4," Submit "),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return r.cancelClick()}),t._uU(6," Cancel "),t.qZA(),t.TgZ(7,"button",4),t.NdJ("click",function(){return r.removeClick()}),t._uU(8," Remove "),t.qZA()(),t.TgZ(9,"mat-card-header")(10,"mat-card-title"),t._uU(11,"Edit Current Task"),t.qZA()(),t.TgZ(12,"mat-card-content")(13,"div",5)(14,"div",6)(15,"mat-checkbox",7),t._uU(16,"Is Complete"),t.qZA()()(),t.TgZ(17,"div",5)(18,"div",6)(19,"mat-form-field",8),t._UZ(20,"input",9),t.YNc(21,j,4,0,"mat-error",10),t.qZA()()(),t.TgZ(22,"div",5)(23,"div",6)(24,"mat-form-field",8),t._UZ(25,"textarea",11,12),t.qZA()()()()()()),2&e&&(t.Q6J("formGroup",r.checkoutForm),t.xp6(3),t.Q6J("disabled",!(r.checkoutForm.dirty&&r.checkoutForm.valid)),t.xp6(18),t.Q6J("ngIf",r.checkoutForm.controls.name.hasError("required")))},dependencies:[d.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,F.IC,v.TO,v.KE,M.Nt,u.a8,u.dk,u.dn,u.n5,u.hq,k.oG,T.lW],styles:[".full-width[_ngcontent-%COMP%]{width:100%}.shipping-card[_ngcontent-%COMP%]{margin:20px auto}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.col[_ngcontent-%COMP%]{flex:1;margin-right:20px}"]}),n})();var w=a(9300),l=a(6373),h=a(4915),p=a(9653);let L=(()=>{class n{constructor(e){this.store=e,this.task$=e.select(h.F.U4).pipe((0,w.h)(r=>void 0!==r))}viewCancelled(e){this.store.dispatch(l.w7.cancelled({currentTask:e}))}viewRemoved(e){this.store.dispatch(l.w7.removed({currentTask:e}))}viewSaved(e){this.store.dispatch(l.w7.saved({currentTask:e}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-current-task-detail-edit-page"]],decls:6,vars:8,consts:[[3,"todo","cancel","remove","checkout"]],template:function(e,r){1&e&&(t.TgZ(0,"app-current-task-detail-edit",0),t.NdJ("cancel",function(i){return r.viewCancelled(i)})("remove",function(i){return r.viewRemoved(i)})("checkout",function(i){return r.viewSaved(i)}),t.ALo(1,"async"),t.qZA(),t.TgZ(2,"pre"),t._uU(3),t.ALo(4,"json"),t.ALo(5,"async"),t.qZA()),2&e&&(t.Q6J("todo",t.lcZ(1,2,r.task$)),t.xp6(3),t.hij("Selected Current Task: ",t.lcZ(4,4,t.lcZ(5,6,r.task$)),"\n"))},dependencies:[J,d.Ov,d.Ts],changeDetection:0}),n})();var b=a(8255);let S=(()=>{class n{constructor(e){this.store=e,this.currentTasks$=e.select(h.F.ck)}ngOnInit(){this.store.dispatch(l.s7.enter())}reorderItems(e){this.store.dispatch(l.xb.reorderList({ids:e}))}viewClearCompleted(){this.store.dispatch(l.s7.clearCompleted())}viewNewCurrentTask(){this.store.dispatch(l.s7.newCurrentTask())}toggleCompleteItem(e){const r=(0,f.zV)(e,!e.isComplete);this.store.dispatch(l.s7.saveItem({currentTask:r}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-current-tasks-page"]],decls:9,vars:4,consts:[[3,"currentTasks","reorderItems","newCurrentTask","toggleCompleteItem"],["data-test","vert-menu-button","mat-icon-button","",1,"more-vert-menu",3,"matMenuTriggerFor"],["appMenu","matMenu"],["data-test","clear-completed-button","mat-menu-item","",3,"click"]],template:function(e,r){if(1&e&&(t.TgZ(0,"app-current-task-list",0),t.NdJ("reorderItems",function(i){return r.reorderItems(i)})("newCurrentTask",function(){return r.viewNewCurrentTask()})("toggleCompleteItem",function(i){return r.toggleCompleteItem(i)}),t.ALo(1,"async"),t.qZA(),t.TgZ(2,"button",1)(3,"mat-icon"),t._uU(4,"more_vert"),t.qZA()(),t.TgZ(5,"mat-menu",null,2)(7,"button",3),t.NdJ("click",function(){return r.viewClearCompleted()}),t._uU(8," Clear Completed "),t.qZA()()),2&e){const s=t.MAs(6);t.Q6J("currentTasks",t.lcZ(1,2,r.currentTasks$)),t.xp6(2),t.Q6J("matMenuTriggerFor",s)}},dependencies:[T.lW,b.VK,b.OP,b.p6,Z.Hw,P,d.Ov],styles:["[_nghost-%COMP%]{background-color:green;display:flex;flex-grow:1;flex-direction:column}.more-vert-menu[_ngcontent-%COMP%]{color:#fff;position:fixed;right:10px;top:10px;z-index:100}"],changeDetection:0}),n})(),U=(()=>{class n{constructor(e){this.store=e,this.task=(0,f.OJ)()}viewCancelled(e){this.store.dispatch(l.tu.cancelled())}viewSaved(e){this.store.dispatch(l.tu.saved({currentTask:e}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-current-task-detail-new-page"]],decls:4,vars:4,consts:[[3,"todo","cancel","checkout"]],template:function(e,r){1&e&&(t.TgZ(0,"app-current-task-detail-new",0),t.NdJ("cancel",function(i){return r.viewCancelled(i)})("checkout",function(i){return r.viewSaved(i)}),t.qZA(),t.TgZ(1,"pre"),t._uU(2),t.ALo(3,"json"),t.qZA()),2&e&&(t.Q6J("todo",r.task),t.xp6(2),t.hij("Selected Current Task: ",t.lcZ(3,2,r.task),"\n"))},dependencies:[I,d.Ts],changeDetection:0}),n})(),z=(()=>{class n{constructor(e){this.store=e}ngOnDestroy(){this.store.dispatch(l.tv.destroyed())}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-current-tasks-root"]],decls:1,vars:0,template:function(e,r){1&e&&t._UZ(0,"router-outlet")},dependencies:[C.lC],styles:["[_nghost-%COMP%]{background-color:red;display:flex;flex-grow:1;flex-direction:column}"],changeDetection:0}),n})();var X=a(9882),$=a(9646),x=a(8505),R=a(3900),V=a(590),_=a(5698),W=a(3237);let H=(()=>{class n{constructor(e){this.store=e}canActivate(){return this.waitForAuth().pipe((0,x.b)(e=>console.log("waitForAuth - complete>",e)),(0,R.w)(()=>this.waitForCurrentTasksToLoad().pipe((0,R.w)(()=>(0,$.of)(!0)))))}waitForAuth(){return this.store.select(W.Mw.dy).pipe((0,w.h)(e=>!!e),(0,V.P)())}waitForCurrentTasksToLoad(){return this.store.select(h.F.OC).pipe((0,x.b)(e=>{e||(console.log("waitForCurrentTasksToLoad:user and taskid?"),this.store.dispatch(l.hV.loadData()))}),(0,w.h)(e=>e),(0,_.q)(1))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(p.yh))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var K=a(4004);const et=(0,p.PH)("[Current Task Detail Edit Page Component Guard] Current Task Not Found"),rt=[{path:"",component:z,canActivate:[X.P,H],children:[{path:m.k.currentTasks.edit.path+"/:"+m.k.currentTasks.edit.idParam,component:L,canActivate:[(()=>{class n{constructor(e,r){this.store=e,this.router=r}canActivate(e){return this.hasCurrentTask()}hasCurrentTask(){return this.store.select(h.F.U4).pipe((0,K.U)(e=>void 0!==e),(0,x.b)(e=>{!1===e&&(console.log("hasCurrentTask>",e),this.store.dispatch(et()),this.router.navigate(["/404"],{skipLocationChange:!0}))}),(0,_.q)(1))}waitForCurrentTasksToLoad(){return this.store.select(h.F.OC).pipe((0,w.h)(e=>e),(0,_.q)(1))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(p.yh),t.LFG(C.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:m.k.currentTasks.new.path,component:U},{path:"",component:S}]}];let ot=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[C.Bz.forChild(rt),C.Bz]}),n})();const at=[J,I,P],st=[L,U,S,z];let it=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.ez,c.UX,G.q,ot]}),n})()}}]);